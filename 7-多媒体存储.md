# 第七章 多媒体存储

## 7.1 磁介质存储

磁介质：软盘、硬盘、磁带、ZIP等

光介质：CD-ROM、DVD等

#### 硬盘的发展

存储介质的发展规律：

1. 大容量
2. 高速度
3. 便携

在一个多媒体系统中，存储系统的**容量**和**速度**都是重点关注的问题

硬盘接口的发展历史：

* ST506 和MFM硬盘驱动
* ESDI硬盘：增强小驱动器接口
* IDE：一个IDE接口支持两个IDE驱动器，通过跳线可以把驱动器按需求配置
* SCSI：小型计算机系统接口，一种驱动器接口标准

SCSI定义一条在主适配器（起始器）和驱动器（目标）之间的8位并行数据通路

一个起始器最多有7个目标，需要控制信号定义SCSI总线的操作

判优、选择、指令、数据、状态、消息、总线控制阶段

SCSI标准对多媒体应用的重要原因：

* 允许不同的多媒体输入、输出设备用一条总线连接到多媒体系统上
* 有丰富的公用指令集
* 提供较快的传输速率
* 允许定义专用的指令集
* 速度快，占有资源较少，但价格昂贵

#### 硬盘的数据存储

**机械硬盘（HHD）存储**：根据电、磁转换原理实现

内部组成：盘片、磁头、控制电路

外部接口：电源、数据线、跨接线接口

磁道：硬盘中的磁头在盘片表面读写数据形成的若干个同心圆轨迹

柱面：将硬盘中的所有盘片每面的任一磁道重合起来就形成一个空心圆柱体

扇区：将盘片上的每条磁道平均分为若干段，每一段就是一个扇区

**C/H/S**：柱面数量（每个盘片上的磁道数）/磁头数量（表示盘片数）/扇区数量

硬盘容量：C × H × S × 512（一个扇区大小）

硬盘数据的读写：

1. 定位，磁头径向移动，盘片转动，定位到某个扇区；盘片以恒定角速度转动
2. 读写：磁头中“写数据”电流产生磁场使盘片表面磁性物质改变。读数据时，磁头经过盘片指定区域，盘片表面磁场使磁头产生感应电流使线圈阻抗发生变化，经过电路处理后还原成数据

**平均访问时间** = 平均寻道时间（磁头从开始到移动到数据所在磁道所花费时间的平均值） + 平均潜伏时间（相应扇区旋转到磁头下方的时间）

**外部数据传输率**：通过接口使数据传给硬盘的传输速度

**内部数据传输率**：硬盘将数据记录在盘片上的速度

**平均无故障时间MTBF**：MTBF越大、设备越可靠

对硬盘的扩展：磁盘跨接技术、独立磁盘冗余阵列

**磁盘跨接技术**

多个驱动器附加到一个单个的主适配器上

优点：简易增加容量

缺点：不能提供很好的容错，可靠性下降（MTBF = 单个MTBF / 驱动器总数

#### RAID技术

RAID子系统：多个由单一控制器操作的小型磁盘驱动器

数据划分：把读写操作并行分布在多个磁盘驱动器上；如果没有额外的冗余度，任何一个磁盘的失败都会导致读写数据的失败

不同的RAID策略：

**RAID0-磁盘划分技术**

原理：将需要存储的数据均分多部分，分散存储在磁盘阵列上

![image-20230605115202914](https://cdn.staticaly.com/gh/LuoChen-LC/picx-images-hosting@master/20230605/image-20230605115202914.5waecs3m3tg0.png)

可用容量：组成RAID 0 所有硬盘容量总和

优点：提高读写速度，对硬盘总容量没有损失；处理大文件快；

缺点：一个硬盘损坏，所有数据将不可恢复

**RAID1-磁盘镜像技术**

原理：每个硬盘都有一个镜像硬盘，存储的内容完全相同

![image-20230605115643941](https://cdn.staticaly.com/gh/LuoChen-LC/picx-images-hosting@master/20230605/image-20230605115643941.1z59fwts8c3k.png)

可用容量：不超过较小硬盘的容量总和

优点：读取性能翻倍；提供完全数据冗余，其中一块数据丢失，可以通过另一块还原

缺点：磁盘利用率低；成本高

**RAID2-数据位交错技术**

原理：在RAID 0 的基础上加入汉明码提供数据纠错（发现和修正一位错误）

优点：加入了数据纠错机制

缺点：成本增高，需要额外的盘做汉明码纠错

**RAID3-并行磁盘阵列**

原理：使用字节级别的条带化技术，采用专用的奇偶校验盘。

![image-20230605120301483](https://cdn.staticaly.com/gh/LuoChen-LC/picx-images-hosting@master/20230605/image-20230605120301483.1jy3ir93c3b4.png)

优点：能在一个磁盘出现故障时确保数据不丢失，可以重建到更换磁盘上

缺点：如果在重建前又有一个磁盘出现故障，所有数据都将丢失；奇偶校验会消耗系统性能，出现性能瓶颈

**RAID4-扇区交错技术**

原理：和RAID 3 类似，但是对数据的访问从按位访问变成了以数据块（扇区）为单位

**RAID5-块交错技术**

原理：综合了RAID 0的条带化技术和阵列数据冗余技术（至少包括三个磁盘）和 RAID 3的奇偶校验，与RAID 3 不同的时将奇偶校验数据分散到每个磁盘中

![image-20230605121151418](https://cdn.staticaly.com/gh/LuoChen-LC/picx-images-hosting@master/20230605/image-20230605121151418.58ah4cjqk700.png)

优点：读写性能高；有校验机制；空间利用率高

缺点：组成的磁盘越多，安全性能越差。连续两块磁盘损坏，所有数据都会丢失

## 7.2 光介质存储

#### 光介质存储的发展

CD-DA：激光数字唱盘

红皮书标准（CD-DA标准）：包括定义了CD的尺寸、物理特性、编码方式、错误校正等

CD-ROM：只读光盘

黄皮书标准：规定了CD盘片上记录数据的方式，后又修改为ISO 9660标准（CDFS）规定了CD盘上文件的结构和组织方式，使计算机操作系统能够定位和访问盘上的数据

CD-I与绿皮书：面向教育和家庭娱乐应用的标准

CD-ROM XA标准：面向计算机应用，可将音频、文本和图像混合存储在CD盘上

Video CD 与白皮书：用于存储视频图像和电影的标准

橙皮书：用于可写入CD的国际标准，分为两部分；第一部分定义了CD-ROM上两种类型的区域，可读区域和可记录区域；第二部分：允许数据一次性或分多次写入空白的CD

#### CD-ROM 只读光盘存储器

最早用于音频存储，具有以下优势：使用方面，耐久；能够随机访问；高保真；大容量；成本低

物理规格：直径120mm、厚度1.2mm、中心15mm的主轴孔

内部结构：

* 聚碳酸酯衬垫：具有金属化的底层
* 铝反射层
* 保护层

**CD盘片的光道结构：**

CAV：恒定角速度；CLV：恒定线速度

CD采用螺旋型光道，光学读出头相对于盘片运动采用CLV表示，使得内外光道的记录密度一样，是盘片表面的利用率增加

**CD盘片的数据读写**

数据以微小的凹坑和平坦的领域的形式存储在光盘的数据层上

写入：用压模冲压，压模用原版盘制成

读入：CD驱动器，由光学读出头、读出头驱动、CD盘驱动机构、控制线路以及处理读出信号的电子线路组成

利用凹坑和非凹坑部分反射的光的强度区分”0“和”1“，凹坑的边缘代表”1” 凹坑和非凹坑的平坦部分代表“0”

#### CD-R可刻录光盘

CD-R：一次写，多次读的光盘

数据的写入：光盘刻录机，有机染料层，利用反射与不反射记录数据

应用：联机目录；大容量数据备份；事务登记；多媒体存档

#### CD-RW可重复擦写光盘

染料记录层采用相变技术使得材料能够转换状态，以此实现重写，但次数有限

了解：**MD小型盘**可重写盘片，由专门的MD播放器播放

#### DVD：光学存储媒体

存储容量增加：光道间距和最小凹凸坑长度不同；使用两面记录数据，同时在一个面上制作多个记录层

## 7.3 分层存储管理

在大型多媒体应用中，不同功能的存储器配合使用，形成分层存储管理系统

![image-20230605145927261](https://cdn.staticaly.com/gh/LuoChen-LC/picx-images-hosting@master/20230605/image-20230605145927261.5arvpmytt2o0.png)

主要目的：数据分类保存；分类的依据：信息生命周期

迁移：从存储层次的一层将对象移动到另一层

归档：将对象迁移到脱机介质或把对象从联机介质中去除